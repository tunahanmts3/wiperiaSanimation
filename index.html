<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WiperiaS Animation</title>
<style>
body{margin:0;font-family:Arial;background:#0b1e2d;color:white;}
.center{display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column;}
.card{background:#102c44;padding:40px;border-radius:12px;width:360px;text-align:center;box-shadow:0 0 25px rgba(0,150,255,0.4);}
.brand{color:#4db8ff;font-size:28px;font-weight:bold;margin-bottom:20px;}
input,select,textarea{width:100%;padding:10px;margin:8px 0;border:none;border-radius:6px;}
button{padding:10px 18px;border:none;border-radius:6px;cursor:pointer;margin:5px;}
.blue{background:#1e90ff;color:white;}
.dark{background:#0f3050;color:white;}
#main{display:none;padding:20px;}
header{display:flex;justify-content:space-between;align-items:center;}
.logo{color:#4db8ff;font-size:24px;font-weight:bold;}
.searchBar{padding:8px;width:250px;border-radius:6px;border:none;}
#filmContainer{display:flex;flex-wrap:wrap;margin-top:20px;}
.film{width:180px;margin:10px;background:#123a5a;border-radius:8px;overflow:hidden;text-align:center;cursor:pointer;position:relative;}
.film img{width:100%;height:240px;object-fit:cover;}
.deleteBtn{position:absolute;top:5px;right:5px;background:#ff4d4d;border:none;color:white;padding:4px 6px;cursor:pointer;}
#adminPanel{background:#0f3050;padding:20px;margin-top:20px;border-radius:10px;display:none;}
#detailPage{display:none;padding:20px;}
video{width:100%;max-height:400px;margin-top:15px;border-radius:10px;}
.small{font-size:12px;color:#bbb;}
</style>
</head>
<body>

<div id="loginScreen" class="center">
<div class="card">
<div class="brand">WiperiaS Animation</div>
<div id="roleSelect">
<button class="blue" onclick="selectRole('normal')">Normal √úyelik</button>
<button class="dark" onclick="selectRole('admin')">Admin</button>
</div>
<div id="loginForm" style="display:none;">
<input id="username" placeholder="Kullanƒ±cƒ± Adƒ±">
<input id="password" type="password" placeholder="≈ûifre">
<input id="adminPassword" type="password" placeholder="Admin ≈ûifresi" style="display:none;">
<button class="blue" onclick="login()">Giri≈ü Yap</button>
<p id="loginMessage"></p>
</div>
</div>
</div>

<div id="main">
<header>
<div class="logo">WiperiaS Animation</div>
<div>
<input class="searchBar" id="searchInput" placeholder="Film / Dizi Ara..." onkeyup="renderFilms()">
<button class="dark" onclick="logout()">√áƒ±kƒ±≈ü</button>
</div>
</header>

<div id="adminPanel">
<h3>üé¨ ƒ∞√ßerik Olu≈ütur</h3>

<input id="seriesName" placeholder="Film / Dizi Adƒ±">
<select id="typeSelect">
<option>Film (Tek B√∂l√ºm)</option>
<option>Dizi (B√∂l√ºml√º)</option>
</select>

<input type="number" id="seasonNumber" placeholder="Sezon No (Dizi i√ßin)">
<input type="number" id="episodeNumber" placeholder="B√∂l√ºm No (Dizi i√ßin)">
<textarea id="scenarioText" rows="4" placeholder="Senaryoyu buraya yaz..."></textarea>

<button class="blue" onclick="generateContent()">AI ile Olu≈ütur</button>
</div>

<div id="filmContainer"></div>
</div>

<div id="detailPage">
<button class="dark" onclick="goBack()">‚Üê Geri</button>
<h2 id="detailTitle"></h2>
<p id="detailInfo"></p>
<p id="detailScenario" class="small"></p>
</div>

<script>
let currentRole="";
let contents=JSON.parse(localStorage.getItem("contents"))||[];

function selectRole(role){
currentRole=role;
loginForm.style.display="block";
adminPassword.style.display=role==="admin"?"block":"none";
}

function login(){
let user=username.value;
let pass=password.value;
let adminPass=adminPassword.value;
if(!user||!pass)return;

let users=JSON.parse(localStorage.getItem("users"))||{};
if(currentRole==="admin" && adminPass!=="ZeFrEt629"){
alert("Admin ≈üifresi yanlƒ±≈ü");
return;
}

if(users[user]){
loginMessage.innerText="Mevcut hesaba giri≈ü yapƒ±ldƒ±.";
}else{
users[user]=pass;
localStorage.setItem("users",JSON.stringify(users));
loginMessage.innerText="Yeni hesap olu≈üturuldu ve giri≈ü yapƒ±ldƒ±.";
}

setTimeout(()=>{
loginScreen.style.display="none";
main.style.display="block";
if(currentRole==="admin"){adminPanel.style.display="block";}
renderFilms();
},1000);
}

function generateContent(){
let name=seriesName.value;
let type=typeSelect.value;
let season=seasonNumber.value||1;
let episode=episodeNumber.value||1;
let scenario=scenarioText.value;

if(!name||!scenario)return;

let related=contents.filter(c=>c.name===name && c.type.includes("Dizi"));
let previousStory="";
related.forEach(r=>{
if(r.season==season && r.episode<episode){
previousStory+=r.scenario+" ";
}
});

let fullScenario=previousStory + scenario;

let newContent={
name:name,
type:type,
season:season,
episode:episode,
scenario:fullScenario,
poster:"https://picsum.photos/300/400?random="+Math.random()
};

contents.push(newContent);
localStorage.setItem("contents",JSON.stringify(contents));
renderFilms();
}

function renderFilms(){
filmContainer.innerHTML="";
let search=searchInput.value.toLowerCase();
contents.forEach((c,index)=>{
if(c.name.toLowerCase().includes(search)){
filmContainer.innerHTML+=`
<div class="film" onclick="openDetail(${index})">
${currentRole==="admin"?`<button class="deleteBtn" onclick="event.stopPropagation();deleteContent(${index})">X</button>`:""}
<img src="${c.poster}">
<p>${c.name}</p>
</div>`;
}
});
}

function deleteContent(i){
contents.splice(i,1);
localStorage.setItem("contents",JSON.stringify(contents));
renderFilms();
}

function openDetail(i){
main.style.display="none";
detailPage.style.display="block";
let c=contents[i];
detailTitle.innerText=c.name;
detailInfo.innerText=c.type.includes("Dizi")?`Sezon ${c.season} B√∂l√ºm ${c.episode}`:"Film";
detailScenario.innerText=c.scenario;
}

function goBack(){
detailPage.style.display="none";
main.style.display="block";
}

function logout(){location.reload();}
</script>
</body>
</html>

